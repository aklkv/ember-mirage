{"version":3,"file":"start-mirage.js","sources":["../src/start-mirage.js"],"sourcesContent":["import { pluralize, singularize } from 'active-inflector';\n\nimport assert from './assert';\n\nexport default function startMirage(\n  makeServer,\n  { owner, env, ...otherOptions } = {},\n) {\n  assert('There is no makeServer function passed to startMirage', makeServer);\n\n  assert(\n    'Mirage config default exported function must at least one parameter',\n    makeServer.length > 0,\n  );\n\n  if (!env) {\n    assert(\n      'You must pass `owner` to startMirage() to lookup environment',\n      owner,\n    );\n    env = owner.resolveRegistration('config:environment');\n  }\n\n  let environment = env.environment;\n\n  let options = {\n    env,\n    environment,\n    inflector: { singularize, pluralize },\n    ...otherOptions,\n  };\n\n  let server = makeServer(options);\n\n  // Check to see if mirageLogging is on the URL. If so, enable logging on the server\n  if (\n    typeof location !== 'undefined' &&\n    location.search.indexOf('mirageLogging') !== -1\n  ) {\n    server.logging = true;\n  }\n\n  return server;\n}\n"],"names":["startMirage","makeServer","owner","env","otherOptions","assert","length","resolveRegistration","environment","options","inflector","singularize","pluralize","server","location","search","indexOf","logging"],"mappings":";;;AAIe,SAASA,WAAWA,CACjCC,UAAU,EACV;EAAEC,KAAK;EAAEC,GAAG;EAAE,GAAGC,YAAAA;AAAa,CAAC,GAAG,EAAE,EACpC;AACAC,EAAAA,OAAM,CAAC,uDAAuD,EAAEJ,UAAU,CAAC,CAAA;EAE3EI,OAAM,CACJ,qEAAqE,EACrEJ,UAAU,CAACK,MAAM,GAAG,CACtB,CAAC,CAAA;EAED,IAAI,CAACH,GAAG,EAAE;AACRE,IAAAA,OAAM,CACJ,8DAA8D,EAC9DH,KACF,CAAC,CAAA;AACDC,IAAAA,GAAG,GAAGD,KAAK,CAACK,mBAAmB,CAAC,oBAAoB,CAAC,CAAA;AACvD,GAAA;AAEA,EAAA,IAAIC,WAAW,GAAGL,GAAG,CAACK,WAAW,CAAA;AAEjC,EAAA,IAAIC,OAAO,GAAG;IACZN,GAAG;IACHK,WAAW;AACXE,IAAAA,SAAS,EAAE;MAAEC,WAAW;AAAEC,MAAAA,SAAAA;KAAW;IACrC,GAAGR,YAAAA;GACJ,CAAA;AAED,EAAA,IAAIS,MAAM,GAAGZ,UAAU,CAACQ,OAAO,CAAC,CAAA;;AAEhC;AACA,EAAA,IACE,OAAOK,QAAQ,KAAK,WAAW,IAC/BA,QAAQ,CAACC,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,EAC/C;IACAH,MAAM,CAACI,OAAO,GAAG,IAAI,CAAA;AACvB,GAAA;AAEA,EAAA,OAAOJ,MAAM,CAAA;AACf;;;;"}